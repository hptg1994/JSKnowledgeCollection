(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{"5QIj":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),s=n.n(o);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=function(e){var t=e.color,n=e.size,a=c(e,["color","size"]);return r.a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),r.a.createElement("polyline",{points:"9 14 4 9 9 4"}),r.a.createElement("path",{d:"M20 20v-7a4 4 0 0 0-4-4H4"}))};l.propTypes={color:s.a.string,size:s.a.oneOfType([s.a.string,s.a.number])},l.defaultProps={color:"currentColor",size:"24"},t.a=l},"7U46":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("TSYQ"),s=n.n(o);t.a=function(e){var t=e.feedback,n=void 0!==t&&t,a=e.bundle,o=void 0===a?"":a,i=e.className,c=void 0===i?"":i,l=e.glyph,u=void 0===l?"":l,p={"rubix-icon":!0,"form-control-feedback":n||!1};o?(p[o]=!0,p["icon-".concat(o,"-").concat(u)]=!0):p[u]=!0;var d={className:[c,s()(p).trim()].join(" ")};return r.a.createElement("span",d)}},Ch8j:function(e,t,n){"use strict";n.r(t);var a=n("pVnL"),r=n.n(a),o=n("lwsE"),s=n.n(o),i=n("a1gu"),c=n.n(i),l=n("Nsbk"),u=n.n(l),p=n("PJYZ"),d=n.n(p),v=n("W8MJ"),f=n.n(v),h=n("7W2i"),g=n.n(h),m=n("lSNA"),b=n.n(m),y=n("RIqP"),C=n.n(y),O=n("VkAN"),x=n.n(O),j=n("q1tI"),E=n.n(j),w=n("vOnD"),k=n("I2HU"),S=n("IP2g"),P=n("wHSu"),I=n("x9gF"),D=n("RsOY"),A=n.n(D),R=n("TSYQ"),N=n.n(R),z=n("47Jv"),M=n("RFJL"),_=n("V4gx"),T=n("nocd"),$=n("tUZH"),L=n.n($),F=n("Acm7"),H=n("Pvf/"),W=n("Nr1y"),q=n("7U46"),B=n("tpGU"),J=n.n(B),V=n("FLkE"),U=n("8R8j"),Y=n("CwS1"),Q=n("EAKA"),K=n("17x9"),X=n.n(K);function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function G(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ee=function(e){var t=e.color,n=e.size,a=G(e,["color","size"]);return E.a.createElement("svg",Z({xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),E.a.createElement("rect",{x:"6",y:"4",width:"4",height:"16"}),E.a.createElement("rect",{x:"14",y:"4",width:"4",height:"16"}))};ee.propTypes={color:X.a.string,size:X.a.oneOfType([X.a.string,X.a.number])},ee.defaultProps={color:"currentColor",size:"24"};var te=ee,ne=n("au/U"),ae=n("5QIj"),re=n("Rzx/"),oe=n("NIzo"),se=n("JOgI"),ie=n("xI/X"),ce=n("mY3/"),le=n("lxDd"),ue=n("Ntaw");function pe(){var e=x()(["\n  ",";\n"]);return pe=function(){return e},e}function de(){var e=x()(["\n  ",";\n  margin-right: 0px;\n  padding: 10px;\n"]);return de=function(){return e},e}function ve(){var e=x()(["\n  ",";\n  margin-right: 0px;\n  padding: 10px;\n"]);return ve=function(){return e},e}function fe(){var e=x()(["\n  ",";\n"]);return fe=function(){return e},e}function he(){var e=x()(["\n  ",";\n"]);return he=function(){return e},e}function ge(){var e=x()(["\n  ",";\n  padding: 10px 9px 10px 12px;\n"]);return ge=function(){return e},e}function me(){var e=x()(["\n  ",";\n"]);return me=function(){return e},e}function be(){var e=x()(["\n  ",";\n"]);return be=function(){return e},e}function ye(){var e=x()(["\n  ",";\n"]);return ye=function(){return e},e}function Ce(){var e=x()(["\n  font-family: ",";\n  font-size: 12px;\n  text-align: right;\n  margin-right: 15px;\n  margin-bottom: 10px;\n"]);return Ce=function(){return e},e}function Oe(){var e=x()(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 15px;\n"]);return Oe=function(){return e},e}function xe(){var e=x()(["\n  border: 1px solid ",";\n  border-radius: 10px;\n  margin-bottom: 10px;\n"]);return xe=function(){return e},e}function je(){var e=x()(["\n  margin-right: 18px;\n  box-shadow: 0px 0px 9px ",";\n  :hover,\n  :focus {\n    box-shadow: 0px 0px 12px ",";\n  }\n"]);return je=function(){return e},e}var Ee=Object(w.b)(je(),ue.b.button,ue.b.button),we=w.c.div(xe(),ue.g.alto);we.ButtonsWrap=w.c.div(Oe()),we.Number=w.c.div(Ce(),le.m),we.Left=Object(w.c)(ce.a).attrs({children:E.a.createElement(Y.a,{size:22,"aria-label":"previous slide"})})(ye(),Ee),we.Right=Object(w.c)(ce.a).attrs({children:E.a.createElement(Q.a,{size:22,"aria-label":"next slide"})})(be(),Ee),we.Pause=Object(w.c)(ce.a).attrs({children:E.a.createElement(te,{size:22,"aria-label":"pause slide show"})})(me(),Ee),we.Play=Object(w.c)(ce.a).attrs({children:E.a.createElement(ne.a,{size:20,"aria-label":"start slide show"})})(ge(),Ee),we.Repeat=Object(w.c)(ce.a).attrs({children:E.a.createElement(ae.a,{size:22,"aria-label":"got to first slide"})})(he(),Ee),we.Plus=Object(w.c)(ce.a).attrs({children:E.a.createElement(re.a,{size:22,"aria-label":"view all slides"})})(fe(),Ee),we.Maximize=Object(w.c)(ce.a).attrs({children:E.a.createElement(oe.a,{size:20,"aria-label":"maximize"})})(ve(),Ee),we.Minimize=Object(w.c)(ce.a).attrs({children:E.a.createElement(se.a,{size:20,"aria-label":"minimize"})})(de(),Ee),we.Minus=Object(w.c)(ce.a).attrs({children:E.a.createElement(ie.a,{size:22})})(pe(),Ee);var ke=we,Se=function(e){function t(e,n){var a;s()(this,t),a=c()(this,u()(t).call(this,e,n)),b()(d()(a),"moveLeft",function(e){if(e&&e.stopPropagation(),a.stop(),a.state.selectedCanvas>0){var t=a.state.selectedCanvas-1;a.setState({selectedCanvas:t})}}),b()(d()(a),"moveRight",function(e){if(e&&e.stopPropagation(),a.stop(),a.state.selectedCanvas<a.props.content.canvasObjects.length-1){var t=a.state.selectedCanvas+1;a.setState({selectedCanvas:t})}}),b()(d()(a),"reset",function(e){e&&e.stopPropagation(),a.stop(),a.props.content.canvasObjects.length>0&&a.setState({selectedCanvas:0})}),b()(d()(a),"play",function(e){e.stopPropagation(),a.setState({play:!0}),a.state.timer=setInterval(a.moveRightTimed,1e3)}),b()(d()(a),"moveRightTimed",function(e){if(e&&e.stopPropagation(),clearInterval(a.state.timer),a.state.selectedCanvas<a.props.content.canvasObjects.length-1){var t=a.state.selectedCanvas+1;a.setState({selectedCanvas:t})}a.state.selectedCanvas<a.props.content.canvasObjects.length-1?a.state.timer=setInterval(a.moveRightTimed,1e3):a.setState({play:!1})}),b()(d()(a),"stop",function(e){e&&e.stopPropagation(),clearInterval(a.state.timer),1==a.state.play&&a.setState({play:!1})}),b()(d()(a),"switchExpandedView",function(e){e&&e.stopPropagation(),clearInterval(a.state.timer),0==a.state.play?a.setState({expandedView:!a.state.expandedView}):a.setState({expandedView:!a.state.expandedView,play:!1})}),b()(d()(a),"closeModal",function(){a.stop(),U.a.remove()}),b()(d()(a),"showCanvasAnimationInModal",function(e){e&&e.stopPropagation(),a.stop();var n=E.a.createElement(t,{content:a.props.content,config:{displayFullScreen:!0},pageProperties:a.props.pageProperties}),r=function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(r))),b()(d()(n),"modalDgRef",E.a.createRef()),b()(d()(n),"open",function(){k.a(["modalDgRef","current","modalRef","current","open"],d()(n))&&n.modalDgRef.current.modalRef.current.open()}),n}return g()(t,e),f()(t,[{key:"render",value:function(){return E.a.createElement(V.a,{ref:this.modalDgRef},n)}}]),t}(J.a);U.a.create(r)}),b()(d()(a),"renderAnimatedCanvas",function(e,t,n,r,o,s){var i=null;if(null!=t&&0!=o){var c="canvasView".concat(n);i=E.a.createElement(ke,{key:c},E.a.createElement(F.default,{key:n,mode:"view",content:t,pageProperties:a.props.pageProperties,config:r,onWidthChange:a.changeWidth,onHeightChange:a.changeHeight}),o>1&&E.a.createElement(ke.Number,null,E.a.createElement("strong",null,s+1)," of ",o))}else i=E.a.createElement("p",{className:"text-center fg-darkgray50"},E.a.createElement("br",null),E.a.createElement("br",null),"No Canvas Added",E.a.createElement("br",null),E.a.createElement("br",null));return E.a.createElement("div",{style:{textAlign:e}},E.a.createElement("div",{style:{display:"block"}},i),o>1?E.a.createElement("div",{style:{textAlign:e}},E.a.createElement(ke.ButtonsWrap,null,E.a.createElement(ke.Left,{disabled:0==a.state.selectedCanvas,onClick:a.moveLeft}),E.a.createElement(ke.Right,{disabled:a.state.selectedCanvas==o-1,onClick:a.moveRight}),a.state.play?E.a.createElement(ke.Pause,{onClick:a.stop}):E.a.createElement(ke.Play,{disabled:a.state.selectedCanvas==o-1,onClick:a.play}),E.a.createElement(ke.Repeat,{disabled:0==a.state.selectedCanvas,onClick:a.reset}),E.a.createElement(ke.Plus,{onClick:a.switchExpandedView}),a.props.config&&a.props.config.displayFullScreen?E.a.createElement(ke.Minimize,{onClick:a.closeModal}):E.a.createElement(ke.Maximize,{onClick:a.showCanvasAnimationInModal}))):null)}),b()(d()(a),"renderExpandedCanvas",function(e,t,n){var r=a.props.content.canvasObjects.map(function(e,n){var r=a.state.keys[n];"canvasView".concat(r);return E.a.createElement(ke,null,E.a.createElement(F.default,{key:r,mode:"view",content:e,pageProperties:a.props.pageProperties,config:t,onWidthChange:a.changeWidth,onHeightChange:a.changeHeight}),E.a.createElement(ke.Number,null,E.a.createElement("strong",null,n+1)," of"," ",a.props.content.canvasObjects.length))});return null==r&&(r=E.a.createElement("p",{className:"text-center fg-darkgray50"},E.a.createElement("br",null),E.a.createElement("br",null),"No Canvas Added",E.a.createElement("br",null),E.a.createElement("br",null))),E.a.createElement("div",{style:{textAlign:e}},E.a.createElement("div",{style:{display:"block"}},r),E.a.createElement("div",{style:{textAlign:e}},E.a.createElement(ke.ButtonsWrap,null,E.a.createElement(ke.Minus,{onClick:a.switchExpandedView}),a.props.config&&a.props.config.displayFullScreen?E.a.createElement(ke.Minimize,{onClick:a.closeModal}):E.a.createElement(ke.Maximize,{onClick:a.showCanvasAnimationInModal}))))});var r=0,o=[];return a.props.content.canvasObjects.map(function(e,t){return o[t]=r++}),a.state={keys:o,selectedCanvas:0,width:a.props.content.width,height:a.props.content.height,timer:null,expandedView:!1,play:!1},a}return g()(t,e),f()(t,[{key:"render",value:function(){var e="center";this.props.pageProperties&&this.props.pageProperties.pageAlign&&(e=this.props.pageProperties.pageAlign);var t=this.props.content.canvasObjects[this.state.selectedCanvas],n=this.state.keys[this.state.selectedCanvas],a={canvasInAnimation:!0},r=null!=this.props.content.canvasObjects?this.props.content.canvasObjects.length:0,o=null;return o=this.state.expandedView?this.renderExpandedCanvas(e,a,r):this.renderAnimatedCanvas(e,t,n,a,r,this.state.selectedCanvas),E.a.createElement("div",{style:{marginTop:30,marginBottom:25}},o)}}]),t}(j.Component);function Pe(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function Ie(){var e=x()(["\n  :active,\n  :focus {\n    outline: none;\n    background: white;\n  }\n\n  .b-some-with-icon,\n  .b-some-with-icon-icon,\n  svg {\n    :focus,\n    :active {\n      outline: none;\n    }\n  }\n"]);return Ie=function(){return e},e}var De=Object(w.c)(W.a)(Ie());var Ae=function(e){function t(e,n){var a;return s()(this,t),a=c()(this,u()(t).call(this,e,n)),b()(d()(a),"canvasAnimationSvgPreviewRef",E.a.createRef()),b()(d()(a),"tabsContainerRef",E.a.createRef()),b()(d()(a),"onDuplicateClickHandler",function(e){e.stopPropagation(),e.preventDefault(),a.props.onDuplicate&&a.props.onDuplicate(a.state.index)}),b()(d()(a),"onRemoveClickHandler",function(e){e.stopPropagation(),e.preventDefault(),a.props.onRemove&&a.props.onRemove(a.state.index)}),b()(d()(a),"onSelectClickHandler",function(e){e.stopPropagation(),e.preventDefault(),a.props.onSelect&&a.props.onSelect(a.state.index)}),a.state={index:e.index,svg:e.svg},a}return g()(t,e),f()(t,null,[{key:"getComponentDefault",value:function(){return{}}}]),f()(t,[{key:"componentDidMount",value:function(){this.setSvgCSS()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.svg!==e.svg||this.props.selected!=e.selected}},{key:"componentDidUpdate",value:function(){this.setSvgCSS()}},{key:"setSvgCSS",value:function(){if(""!=this.props.svg&&this.canvasAnimationSvgPreviewRef.current){var e=this.canvasAnimationSvgPreviewRef.current;e.lastChild&&e.lastChild.setAttribute("style","width: 100%; height: 100%")}}},{key:"render",value:function(){var e={__html:this.props.svg},t=E.a.createElement("div",{ref:this.canvasAnimationSvgPreviewRef,style:{width:"100px",height:"80px",position:"relative"},dangerouslySetInnerHTML:e}),n=1==this.props.selected?{border:"1px solid #4B49FF",marginLeft:"5px",borderRadius:"5px"}:{borderRadius:"5px",marginLeft:"5px"};return E.a.createElement("a",{className:"canvas-animation-thumbnail","data-thumb-index":this.state.index,style:n,onClick:this.onSelectClickHandler},t,E.a.createElement("div",{className:"text-center",style:{display:"block"}},E.a.createElement("h5",{className:"canvas-animation-thumbnail-text"},E.a.createElement("span",null,this.state.index+1)),E.a.createElement(De,{className:"canvas-animation-action-button",onClick:this.onDuplicateClickHandler},E.a.createElement(_.a,{icon:T.cloneIcon})),E.a.createElement(De,{className:"canvas-animation-action-button",onClick:this.onRemoveClickHandler},E.a.createElement(_.a,{icon:T.closeIcon1}))))}}]),t}(E.a.Component),Re=function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=c()(this,(e=u()(t)).call.apply(e,[this].concat(r))),b()(d()(n),"tabsContainerRef",E.a.createRef()),b()(d()(n),"moveThumbnails",function(e,t){var a=[];n.tabsContainerRef.current.querySelectorAll(".canvas-animation-thumbnail").forEach(function(e){a.push(parseInt(e.getAttribute("data-thumb-index"),10))});var r=[a[t.itemIndex],a[e.itemIndex]];a[e.itemIndex]=r[0],a[t.itemIndex]=r[1],n.props.reorderCanvas(a)}),n}return g()(t,e),f()(t,[{key:"render",value:function(){var e=this,t=this.props.canvasObjects.map(function(t,n){var a=E.a.createElement(Ae,{key:"th".concat(n),index:n,svg:t.svg_string,selected:n==e.props.selectedCanvas,onSelect:e.props.selectCanvas,onRemove:e.props.removeCanvas,onDuplicate:e.props.duplicateCanvas});return E.a.createElement(I.a,{index:n,moveItem:e.moveThumbnails,ListItemJSX:a})});return E.a.createElement("div",{className:L.a.canvasAnimationThumbnailStrip,ref:this.tabsContainerRef},t,E.a.createElement("a",{style:{top:"45px"},className:"canvas-animation-add-thumbnail",onClick:this.props.addCanvas},E.a.createElement(_.a,{icon:T.thinPlus})),E.a.createElement(W.a,{className:"cmcomp-tabs-scroll-left educative-codecomponent-scroll-control",onMouseDown:this.scrollLeft,onMouseUp:this.cancelScroll},E.a.createElement(q.a,{glyph:"glyphicon glyphicon-chevron-left"})),E.a.createElement(W.a,{className:"cmcomp-tabs-scroll-right educative-codecomponent-scroll-control",onMouseDown:this.scrollRight,onMouseUp:this.cancelScroll},E.a.createElement(q.a,{glyph:"glyphicon glyphicon-chevron-right"})))}}]),t}(E.a.Component),Ne=E.a.createElement(z.a,{id:"animation-fullscreen-tooltip"},"Full screen (Ctrl+F11)"),ze=function(e){function t(e,n){var a;s()(this,t),a=c()(this,u()(t).call(this,e,n)),b()(d()(a),"canvasRef",E.a.createRef()),b()(d()(a),"props",void 0),b()(d()(a),"addCanvas",function(){var e=F.default.getComponentDefault();a.addCanvasObject(e)}),b()(d()(a),"changeHeight",function(e){var t=a.props.content.canvasObjects;t.map(function(t,n){return t.height=e}),a.props.updateContentState({canvasObjects:t,height:e})}),b()(d()(a),"changeWidth",function(e){var t=a.props.content.canvasObjects;t.map(function(t,n){return t.width=e}),a.props.updateContentState({canvasObjects:t,width:e})}),b()(d()(a),"duplicateCanvas",function(e){a.saveCurrentCanvas();var t=a.props.content.canvasObjects[e];e==a.getSelectedCanvasIndex()&&null!=a.state.bufferedCanvasContent&&(t=a.state.bufferedCanvasContent),t=H.a.cloneObject(t),a.addCanvasBase(t,!0,e)}),b()(d()(a),"removeCanvas",function(e){var t=a.getSelectedCanvasIndex(),n=t;e<t?n=t-1:e==t&&a.props.content.canvasObjects.length-1==t&&(n=t-1);var r=A()(a.state.keys,{$splice:[[e,1]]}),o=a.props.content.canvasObjects;a.props.updateContentState({canvasObjects:[].concat(C()(o.slice(0,e)),C()(o.slice(e+1))),keys:C()(r),selectedCanvas:n}),a.setState({keys:r})}),b()(d()(a),"reorderCanvas",function(e){if(!(e.length<=1)){for(var t=0,n=[],r=[],o=0;o<e.length;o++){var s=e[o];a.getSelectedCanvasIndex()==s&&(t=o),n.push(a.props.content.canvasObjects[s]),r.push(a.state.keys[s])}a.props.updateContentState({canvasObjects:n,keys:r,selectedCanvas:t}),a.setState({keys:r})}}),b()(d()(a),"selectCanvas",function(e){a.saveCurrentCanvas();var t=a.props.content.canvasObjects,n=a.getSelectedCanvasIndex(),r=a.state.bufferedCanvasContent;a.props.updateContentState({canvasObjects:[].concat(C()(t.slice(0,n)),[{width:r.width,height:r.height,objectsDict:r.objectsDict,svg_string:r.svg_string,canvasJSON:r.canvasJSON,caption:r.caption,version:r.version}],C()(t.slice(n+1))),selectedCanvas:e}),a.state.bufferedCanvasContent=null}),b()(d()(a),"updateCanvasState",function(e){a.state.bufferedCanvasContent=e}),b()(d()(a),"updateCanvasObjectCallback",function(e){var t=a.getSelectedCanvasIndex(),n=a.props.content.canvasObjects;n[t]=e,a.props.updateContentState({canvasObjects:n})}),b()(d()(a),"toggleFullScreen",function(){a.setState(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(n,!0).forEach(function(t){b()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{fullscreen:!e.fullscreen})})}),b()(d()(a),"handleKeyDown",function(e){"edit"===a.props.mode&&("Escape"===e.key&&a.exitFullScreenMode(),"F11"===e.key&&e.ctrlKey&&(e.preventDefault(),a.toggleFullScreen()))});var r=0,o=[];return e.content.canvasObjects.map(function(e,t){return o[t]=r++}),a.state={keys:o,bufferedCanvasContent:null,fullscreen:!1},a}return g()(t,e),f()(t,null,[{key:"getComponentDefault",value:function(){return{version:"1.0",width:600,height:400,canvasObjects:[F.default.getComponentDefault()]}}},{key:"getNewComponentDefault",value:function(){return{version:"2.0",width:600,height:400,canvasObjects:[F.default.getComponentDefault()],keys:[0],selectedCanvas:0}}}]),f()(t,[{key:"componentDidMount",value:function(){this.registerEvents()}},{key:"componentWillUnmount",value:function(){this.unregisterEvents()}},{key:"addCanvasBase",value:function(e,t,n){e.width=this.props.content.width,e.height=this.props.content.height;var a=this.props.content.canvasObjects,r=function(e){return e&&0!=e.length?Math.max.apply(Math,C()(e))+1:0}(this.state.keys),o=this.getSelectedCanvasIndex(),s=this.state.bufferedCanvasContent,i=this.state.keys;if(t){for(var c=[],l=[],u=0;u<a.length;u++)null!=s&&u==o?c.push({width:s.width,height:s.height,objectsDict:s.objectsDict,svg_string:s.svg_string,canvasJSON:s.canvasJSON,caption:s.caption,version:s.version}):c.push(a[u]),l.push(i[u]),u==n&&(c.push(e),l.push(r));i[i.length]=r,this.props.updateContentState({canvasObjects:c,selectedCanvas:n+1,keys:l})}else i[i.length]=r,null!=s?this.props.updateContentState({canvasObjects:[].concat(C()(a.slice(0,o)),[{width:s.width,height:s.height,objectsDict:s.objectsDict,svg_string:s.svg_string,canvasJSON:s.canvasJSON,caption:s.caption,version:s.version}],C()(a.slice(o+1)),[e]),selectedCanvas:a.length,keys:C()(i)}):this.props.updateContentState({canvasObjects:[].concat(C()(a),[e]),selectedCanvas:a.length,keys:C()(i)});this.state.bufferedCanvasContent=null}},{key:"addCanvasObject",value:function(e){this.saveCurrentCanvas(),this.addCanvasBase(e)}},{key:"getSelectedCanvasIndex",value:function(){return this.props.content.selectedCanvas?this.props.content.selectedCanvas:0}},{key:"saveComponent",value:function(){if("edit"==this.props.mode){this.saveCurrentCanvas();var e=this.props.content.canvasObjects,t=this.getSelectedCanvasIndex(),n=this.state.bufferedCanvasContent;this.props.updateContentState({canvasObjects:[].concat(C()(e.slice(0,t)),[{width:n.width,height:n.height,objectsDict:n.objectsDict,svg_string:n.svg_string,canvasJSON:n.canvasJSON,caption:n.caption,version:n.version}],C()(e.slice(t+1)))}),this.state.bufferedCanvasContent=null}}},{key:"saveCurrentCanvas",value:function(){k.a(["canvasRef","current","saveComponent"],this)&&this.canvasRef.current.saveComponent()}},{key:"exitFullScreenMode",value:function(){this.state.fullscreen&&this.toggleFullScreen()}},{key:"registerEvents",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"unregisterEvents",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e="edit"!=this.props.mode,t=this.props,n=t.pageId,a=t.authorId,o=t.collectionId,s=t.isDraft,i=t.userId,c=t.shotId,l=t.editorPageId,u={pageId:n,authorId:a,collectionId:o,userId:i,shotId:c,editorPageId:l};if(e)return E.a.createElement(Se,{content:this.props.content,pageProperties:this.props.pageProperties,key:"canvasViewer"});var p=this.getSelectedCanvasIndex();this.props.pageProperties&&this.props.pageProperties.pageAlign&&this.props.pageProperties.pageAlign;var d=this.props.content.canvasObjects?this.props.content.canvasObjects[p]:null,v=null,f={pageId:n,authorId:a,collectionId:o,isDraft:s,userId:i,shotId:c,editorPageId:l};if(null!=d){var h=this.state.keys[p];null!=this.props.content.canvasObjects&&this.props.content.canvasObjects.length;v=E.a.createElement(F.default,r()({ref:this.canvasRef,key:h,mode:"edit",content:d,pageProperties:this.props.pageProperties,config:{canvasInAnimation:!0},locationProps:f,onWidthChange:this.changeWidth,dispatch:this.props.dispatch,onHeightChange:this.changeHeight,updateContentState:this.updateCanvasState,updateCanvasObjectCallback:this.updateCanvasObjectCallback,isFullscreen:this.state.fullscreen},u))}else v=E.a.createElement("p",{className:"text-center fg-darkgray50"},E.a.createElement("br",null),E.a.createElement("br",null),"Click the add icon below to add a canvas",E.a.createElement("br",null),E.a.createElement("br",null));var g=this.state.fullscreen;return E.a.createElement("div",{className:N()(L.a.animationContainer,b()({},L.a.fullscreen,g))},E.a.createElement(Re,{canvasObjects:this.props.content.canvasObjects,keys:this.state.keys,selectedCanvas:p,reorderCanvas:this.reorderCanvas,selectCanvas:this.selectCanvas,removeCanvas:this.removeCanvas,duplicateCanvas:this.duplicateCanvas,addCanvas:this.addCanvas}),E.a.createElement("div",{className:L.a.canvasContainer},v),E.a.createElement(M.a,{placement:"top",overlay:Ne},E.a.createElement("div",{className:L.a.fullscreenBtnWrapper},E.a.createElement(W.a,{className:L.a.btnFullscreen,onClick:this.toggleFullScreen},E.a.createElement(S.a,{icon:g?P.p:P.i})))))}}]),t}(E.a.Component);t.default=ze},JOgI:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),s=n.n(o);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=function(e){var t=e.color,n=e.size,a=c(e,["color","size"]);return r.a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),r.a.createElement("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"}))};l.propTypes={color:s.a.string,size:s.a.oneOfType([s.a.string,s.a.number])},l.defaultProps={color:"currentColor",size:"24"},t.a=l},NIzo:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),s=n.n(o);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=function(e){var t=e.color,n=e.size,a=c(e,["color","size"]);return r.a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),r.a.createElement("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"}))};l.propTypes={color:s.a.string,size:s.a.oneOfType([s.a.string,s.a.number])},l.defaultProps={color:"currentColor",size:"24"},t.a=l},Nr1y:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("TSYQ"),s=n.n(o);t.a=function(e){for(var t=e.xs,n=e.sm,a=e.lg,o=e.close,i=e.block,c=e.type,l=void 0===c?"button":c,u=e.navbar,p=e.active,d=e.inverse,v=void 0!==d&&d,f=e.rounded,h=e.outlined,g=void 0!==h&&h,m=e.bsStyle,b=void 0===m?"default":m,y=e.onlyOnHover,C=e.retainBackground,O=e.disabled,x=void 0!==O&&O,j=e.onClick,E=e.className,w=e.componentClass,k=void 0===w?"button":w,S=e.children,P=k,I={btn:!0,"btn-xs":t,"btn-sm":n,"btn-lg":a,active:p,"btn-block":i,"navbar-btn":u,"btn-inverse":!!C||v,"btn-rounded":f,"btn-outlined":!!v||!!y||!!C||g,"btn-onlyOnHover":y,"btn-retainBg":C},D=null,A=b.split(","),R=0;R<A.length;R++)I["btn-".concat(A[R].trim())]=!0;D=s()(I),o&&(D="close",S=r.a.createElement("span",null,r.a.createElement("span",{"aria-hidden":"true"},"×"),r.a.createElement("span",{className:"sr-only"},"Close")));var N={type:l,onClick:j,role:"button",disabled:x,className:[E,D].join(" ")};return r.a.createElement(P,N,S)}},RsOY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("QLaP"),r=Object.prototype.hasOwnProperty,o=Array.prototype.splice,s=Object.prototype.toString;function i(e){return s.call(e).slice(8,-1)}var c=Object.assign||function(e,t){return l(t).forEach(function(n){r.call(t,n)&&(e[n]=t[n])}),e},l="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function u(e){return Array.isArray(e)?c(e.constructor(e.length),e):"Map"===i(e)?new Map(e):"Set"===i(e)?new Set(e):e&&"object"==typeof e?c(Object.create(Object.getPrototypeOf(e)),e):e}var p=function(){function e(){this.commands=c({},d),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var n=this,o="function"==typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(o)||a(!Array.isArray(o),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),a("object"==typeof o&&null!==o,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(this.commands).join(", "));var s=e;return l(o).forEach(function(t){if(r.call(n.commands,t)){var a=e===s;s=n.commands[t](o[t],s,o,e),a&&n.isEquals(s,e)&&(s=e)}else{var c="Map"===i(e)?n.update(e.get(t),o[t]):n.update(e[t],o[t]),l="Map"===i(s)?s.get(t):s[t];n.isEquals(c,l)&&(void 0!==c||r.call(e,t))||(s===e&&(s=u(e)),"Map"===i(s)?s.set(t,c):s[t]=c)}}),s},e}();t.Context=p;var d={$push:function(e,t,n){return f(t,n,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,n){return f(t,n,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,n,r){return function(e,t){a(Array.isArray(e),"Expected $splice target to be an array; got %s",e),g(t.$splice)}(t,n),e.forEach(function(e){g(e),t===r&&e.length&&(t=u(r)),o.apply(t,e)}),t},$set:function(e,t,n){return function(e){a(1===Object.keys(e).length,"Cannot have more than one key in an object with $set")}(n),e},$toggle:function(e,t){h(e,"$toggle");var n=e.length?u(t):t;return e.forEach(function(e){n[e]=!t[e]}),n},$unset:function(e,t,n,a){return h(e,"$unset"),e.forEach(function(e){Object.hasOwnProperty.call(t,e)&&(t===a&&(t=u(a)),delete t[e])}),t},$add:function(e,t,n,a){return m(t,"$add"),h(e,"$add"),"Map"===i(t)?e.forEach(function(e){var n=e[0],r=e[1];t===a&&t.get(n)!==r&&(t=u(a)),t.set(n,r)}):e.forEach(function(e){t!==a||t.has(e)||(t=u(a)),t.add(e)}),t},$remove:function(e,t,n,a){return m(t,"$remove"),h(e,"$remove"),e.forEach(function(e){t===a&&t.has(e)&&(t=u(a)),t.delete(e)}),t},$merge:function(e,t,n,r){var o,s;return o=t,a((s=e)&&"object"==typeof s,"update(): $merge expects a spec of type 'object'; got %s",s),a(o&&"object"==typeof o,"update(): $merge expects a target of type 'object'; got %s",o),l(e).forEach(function(n){e[n]!==t[n]&&(t===r&&(t=u(r)),t[n]=e[n])}),t},$apply:function(e,t){var n;return a("function"==typeof(n=e),"update(): expected spec of $apply to be a function; got %s.",n),e(t)}},v=new p;function f(e,t,n){a(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",n,e),h(t[n],n)}function h(e,t){a(Array.isArray(e),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",t,e)}function g(e){a(Array.isArray(e),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",e)}function m(e,t){var n=i(e);a("Map"===n||"Set"===n,"update(): %s expects a target of type Set or Map; got %s",t,n)}t.isEquals=v.update.isEquals,t.extend=v.extend,t.default=v.update,t.default.default=e.exports=c(t.default,t)},tUZH:function(e,t,n){e.exports={canvasAnimationThumbnailStrip:"canvasAnimationThumbnailStrip___1v-11",canvasAnimationAddThumbnail:"canvasAnimationAddThumbnail___2QcOn",animationContainer:"animationContainer___yzalA",canvasContainer:"canvasContainer___17hZt",fullscreenBtnWrapper:"fullscreenBtnWrapper___18e46",btnFullscreen:"btnFullscreen___oPgZX",fullscreen:"fullscreen___16FCC"}},x9gF:function(e,t,n){"use strict";var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),s=n.n(o),i=n("a1gu"),c=n.n(i),l=n("Nsbk"),u=n.n(l),p=n("7W2i"),d=n.n(p),v=n("q1tI"),f=n.n(v),h=n("oz7q"),g="draggable",m={beginDrag:function(e){return{parentIndex:e.parentIndex,index:e.index}},canDrag:function(){return!0}};var b=n("i8i4"),y={hover:function(e,t,n){var a=t.getItem().index,r=e.index;if(!function(e,t,n,a){if(n===a)return!1;var r=Object(b.findDOMNode)(e).getBoundingClientRect(),o=(r.bottom-r.top)/2,s=r.bottom-r.top-o,i=t.getClientOffset().y-r.top;if(n<a&&i<s/4)return!1;if(n>a&&i>o)return!1;return!0}(n,t,a,r))return;var o={itemIndex:a},s={itemIndex:r};e.moveItem(o,s),t.getItem().index=r}};var C=Object(h.DropTarget)(g,y,function(e,t){return{connectDropTarget:e.dropTarget(),canDrop:t.canDrop()}})(Object(h.DragSource)(g,m,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return d()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.ListItemJSX,n=e.connectDragSource,a=e.connectDropTarget,r=e.onClick;return n(a(f.a.createElement("div",{onClick:r,className:this.props.class},t)))}}]),t}(v.Component)));t.a=C},"xI/X":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("17x9"),s=n.n(o);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=function(e){var t=e.color,n=e.size,a=c(e,["color","size"]);return r.a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),r.a.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))};l.propTypes={color:s.a.string,size:s.a.oneOfType([s.a.string,s.a.number])},l.defaultProps={color:"currentColor",size:"24"},t.a=l}}]);
//# sourceMappingURL=widget-CanvasAnimation.8f7227a3cee5cbcfa814.prod.js.map